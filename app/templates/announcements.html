{% extends "base.html" %}
{% block content %}
<h1>Announcements</h1>

{% if user.role == "instructor" %}
  <div class="card">
    <h2>Post Announcement</h2>
    <form method="post" action="{{ url_for('announcements.create_announcement_route') }}">
      <input name="title" placeholder="Title" required>
      <textarea name="body" placeholder="Write announcement..." required></textarea>
      <button class="btn btn-primary" type="submit">Post</button>
    </form>
  </div>
{% endif %}

<div class="card">
  <h2>Feed</h2>
  {% if items %}
    {% for a in items %}
      <div class="post">
        <h3>{{ a.title }}</h3>
        <p class="muted">{{ a.created_at.strftime("%Y-%m-%d %H:%M") }}</p>
        <p>{{ a.body }}</p>
      </div>
      <hr class="line">
    {% endfor %}
  {% else %}
    <p class="muted">No announcements yet.</p>
  {% endif %}
</div>
{% endblock %}
