{% extends "base.html" %}
{% block content %}
<h1>Grades</h1>

{% if role == "student" %}
  <div class="card">
    <h2>My Grades</h2>
    {% if grades %}
      <table>
        <thead><tr><th>Course ID</th><th>Item</th><th>Score</th><th>Date</th></tr></thead>
        <tbody>
          {% for g in grades %}
            <tr>
              <td>{{ g.course_id }}</td>
              <td>{{ g.item_name }}</td>
              <td>{{ g.score }}</td>
              <td>{{ g.created_at.strftime("%Y-%m-%d") }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="muted">No grades available.</p>
    {% endif %}
  </div>
{% else %}
  <div class="card">
    <h2>Add Grade (Instructor)</h2>
    <form method="post" action="{{ url_for('grades.add_grade_route') }}">
      <label>Student</label>
      <select name="student_id" required>
        {% for s in students %}
          <option value="{{ s.id }}">{{ s.name }} ({{ s.email }})</option>
        {% endfor %}
      </select>

      <label>Course</label>
      <select name="course_id" required>
        {% for c in courses %}
          <option value="{{ c.id }}">{{ c.code }} â€” {{ c.title }}</option>
        {% endfor %}
      </select>

      <label>Item Name</label>
      <input name="item_name" placeholder="Midterm / Lab 1" required>

      <label>Score</label>
      <input name="score" type="number" step="0.5" required>

      <button class="btn btn-primary" type="submit">Add</button>
    </form>
  </div>
{% endif %}

{% endblock %}
